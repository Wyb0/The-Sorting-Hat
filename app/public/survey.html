<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>The Sorting Hat</title>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div class ="container" id="questions">
        <div class = "row">
            <div class = "col-md-5">
            </div>
            <div class = "col-md-7">
                <h3>Which job would you prefer?</h3>
                <br>
                <label class="radio-inline"><input type="radio" name="question1" value="1">Professional Athlete</label><br>
                <label class="radio-inline"><input type="radio" name="question1" value="2">Politician</label><br>
                <label class="radio-inline"><input type="radio" name="question1" value="3">Teacher</label><br>
                <label class="radio-inline"><input type="radio" name="question1" value="4">Scientist</label><br>
            </div>
        </div>
        <br>
        <div class = "row">
            <div class = "col-md-5">
            </div>
            <div class = "col-md-7">
                <h3>Which class most interests you?</h3>
                <br>
                <label class="radio-inline"><input type="radio" name="question2" value="1">Defence Against the Dark Arts</label><br>
                <label class="radio-inline"><input type="radio" name="question2" value="2">History of Magic</label><br>
                <label class="radio-inline"><input type="radio" name="question2" value="3">Herbology</label><br>
                <label class="radio-inline"><input type="radio" name="question2" value="4">Potions</label><br>
            </div>
        </div>
        <br>
        <div class = "row">
            <div class = "col-md-5">
            </div>
            <div class = "col-md-7">
                <h3>If you could do one thing right now, what would it be?</h3>
                <br>
                <label class="radio-inline"><input type="radio" name="question3" value="1">Explore the World</label><br>
                <label class="radio-inline"><input type="radio" name="question3" value="2">Start your own Company</label><br>
                <label class="radio-inline"><input type="radio" name="question3" value="3">Start a Family</label><br>
                <label class="radio-inline"><input type="radio" name="question3" value="4">Stay in School</label><br>
                </div>
            </div>
        <br>
        <div class = "row">
            <div class = "col-md-5">
            </div>
            <div class = "col-md-7">
                <h3>What would be your spirit animal?</h3>
                <br>                
                <label class="radio-inline"><input type="radio" name="question4" value="1">Lion</label><br>
                <label class="radio-inline"><input type="radio" name="question4" value="2">Snake</label><br>
                <label class="radio-inline"><input type="radio" name="question4" value="3">Badger</label><br>
                <label class="radio-inline"><input type="radio" name="question4" value="4">Eagle</label><br>
            </div>
        </div>
        <br>
        <div class = "row">
            <div class = "col-md-5">
            </div>
            <div class = "col-md-7">
                <h3>You received a Howler from your parents. What for?</h3>
                <br>                
                <label class="radio-inline"><input type="radio" name="question5" value="1">Sneaking into the Forbidden Forest at night on a dare</label><br>
                <label class="radio-inline"><input type="radio" name="question5" value="2">Getting caught cheating in my Divination O.W.L.</label><br>
                <label class="radio-inline"><input type="radio" name="question5" value="3">I would never receive a Howler!</label><br>
                <label class="radio-inline"><input type="radio" name="question5" value="4">Being put in detention for being caught in the library after hours</label><br>
            </div>
        </div>
        <br>
        <div class = "row">
            <div class = "col-md-5">
            </div>
            <div class = "col-md-7">
                <a class="btn btn-primary btn-lg" id="submit" role="button">Submit</a></p>
            </div>
        </div>
    </div>
</body>
<script>
    $("#submit").on("click", function () {
        var userScore= []
        userScore.push(
	        $('input[name=question1]:checked').val(),
	        $('input[name=question2]:checked').val(),
	        $('input[name=question3]:checked').val(),
            $('input[name=question4]:checked').val(),
            $('input[name=question5]:checked').val()
        );
        console.log(userScore)

        $.get("/houseData", function(response) {
            // console.log(response) 

            var house = response;
            console.log(house);

            var houseMatch = {};
    
            var closestHouse = 10;

            var userHouse;
            
            for(i=0; i < house.length; i++) {

                var differences = []
                var difference = 0;

                //console.log("House: " + house[i].name)
                for(j=0; j < house[i].scores.length; j++) {
                    differences.push(Math.abs(house[i].scores[j] - userScore[j]))
                }
                console.log("Difference: " + differences)

                for(k=0; k < differences.length; k++){
                difference += differences[k]
                }
                console.log("Difference: " + difference)

                if (houseMatch == {} ) {
                    houseMatch = house[i];
                    closestHouse = difference;
                } else if (difference < closestHouse) {
                    houseMatch = house[i];
                    closestHouse = difference;
                }
                console.log("Closest House: " + closestHouse);
                
                if(closestHouse == difference){
                    console.log(closestHouse, house[i].name);
                    userHouse = house[i].name;
                }
            } 
            console.log("userHouse: ", userHouse);
        })
    })
</script>
</html>